<!DOCTYPE html>
<html>
<head>
    <title>Mobile Minecraft</title>
    <style>
        body { margin: 0; overflow: hidden; touch-action: none; }
        canvas { display: block; width: 100%; height: 100%; }
    </style>
</head>
<body>
    <canvas id="game"></canvas>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Game settings
        const BLOCK_SIZE = 20;
        const WORLD_SIZE = 16;
        const GRAVITY = 0.5;
        const JUMP_FORCE = -10;

        // Player
        const player = {
            x: 100,
            y: 100,
            width: BLOCK_SIZE,
            height: BLOCK_SIZE * 1.5,
            velX: 0,
            velY: 0,
            speed: 3,
            isJumping: false
        };

        // World (0 = air, 1 = dirt, 2 = grass)
        const world = Array(WORLD_SIZE).fill().map(() => Array(WORLD_SIZE).fill(0));
        for (let x = 0; x < WORLD_SIZE; x++) {
            for (let y = WORLD_SIZE - 3; y < WORLD_SIZE; y++) {
                world[x][y] = y === WORLD_SIZE - 3 ? 2 : 1; // Grass on top layer
            }
        }

        // Touch controls
        let touchStartX = 0;
        let touchStartY = 0;
        let moveLeft = false;
        let moveRight = false;
        let jump = false;

        canvas.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });

        canvas.addEventListener('touchmove', (e) => {
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            const dx = touchX - touchStartX;
            const dy = touchY - touchStartY;

            if (Math.abs(dx) > Math.abs(dy)) {
                moveLeft = dx < 0;
                moveRight = dx > 0;
            } else if (dy < -10) {
                jump = true;
            }
        });

        canvas.addEventListener('touchend', () => {
            moveLeft = false;
            moveRight = false;
            jump = false;
        });

        // Game loop
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update player
            if (moveLeft) player.velX = -player.speed;
            else if (moveRight) player.velX = player.speed;
            else player.velX = 0;

            if (jump && !player.isJumping) {
                player.velY = JUMP_FORCE;
                player.isJumping = true;
            }

            player.velY += GRAVITY;
            player.x += player.velX;
            player.y += player.velY;

            // Simple collision with ground
            if (player.y + player.height > canvas.height - (BLOCK_SIZE * 3)) {
                player.y = canvas.height - (BLOCK_SIZE * 3) - player.height;
                player.velY = 0;
                player.isJumping = false;
            }

            // Draw world
            for (let x = 0; x < WORLD_SIZE; x++) {
                for (let y = 0; y < WORLD_SIZE; y++) {
                    if (world[x][y] === 1) {
                        ctx.fillStyle = '#8B4513'; // Dirt
                        ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
                    } else if (world[x][y] === 2) {
                        ctx.fillStyle = '#7CFC00'; // Grass
                        ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
                    }
                }
            }

            // Draw player
            ctx.fillStyle = '#FF0000';
            ctx.fillRect(player.x, player.y, player.width, player.height);

            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
